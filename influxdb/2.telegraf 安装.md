# telegraf 安装

### 配置文件
```
mkdir /home/influx/telegraf
docker run --rm telegraf telegraf config > /home/influx/telegraf/telegraf.conf
vim /home/influx/telegraf/telegraf.conf
```
###修改# Configuration for telegraf agent
```
#外网ip
hostname = "ip" 
```
### 修改[[outputs.influxdb]]部分
```
urls = ["http://[ip]:8086"]
database = "telegraf"
username = "admin"
password = "admin123"
```
### 添加配置
```
# Read metrics about system load & uptime
[[inputs.system]]
  # no configuration
[[inputs.statsd]]
  max_tcp_connections = 250
  tcp_keep_alive = false
  service_address = ":8125"
  delete_gauges = true
  delete_counters = true
  delete_sets = true
  delete_timings = true
  percentiles = [90.0]
  metric_separator = "."

```
### 启动 telegraf
```
docker run -d --name telegraf \
-v /home/influx/telegraf/telegraf.conf:/etc/telegraf/telegraf.conf:ro \
telegraf
```